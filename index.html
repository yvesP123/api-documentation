<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <style>
        /* Base styles */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-bg: #f8f9fa;
            --dark-bg: #2c3e50;
            --text-color: #333333;
            --text-light: #f8f9fa;
            --border-color: #e0e0e0;
            --code-bg: #f7f7f7;
            --code-border: #3498db;
            --hover-bg: #f0f0f0;
            --shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            --radius: 4px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            transition: var(--transition);
        }

        /* Layout */
        .container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .main-content {
            min-width: 0;
            padding: 0 20px 50px 20px;
        }

        /* Typography */
        h1 {
            color: var(--secondary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 30px;
        }

        h2 {
            color: var(--secondary-color);
            margin-top: 25px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px;
        }

        h3 {
            color: var(--primary-color);
            margin-top: 20px;
            position: relative;
            cursor: pointer;
            padding-left: 30px;
        }

        h4 {
            margin-top: 15px;
            color: var(--secondary-color);
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Code and Pre formatting */
        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            background-color: var(--code-bg);
            padding: 2px 4px;
            border-radius: var(--radius);
            font-size: 14px;
            transition: var(--transition);
        }

        pre {
            background-color: var(--code-bg);
            border-left: 4px solid var(--code-border);
            padding: 15px;
            border-radius: var(--radius);
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
            transition: var(--transition);
        }

        /* Tables */
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 15px 0;
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            overflow: hidden;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: var(--light-bg);
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: var(--light-bg);
        }

        /* Endpoint styling */
        .endpoint {
            background-color: var(--light-bg);
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .endpoint:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* HTTP Method colors */
        .method {
            font-weight: bold;
            color: var(--secondary-color);
            margin-right: 8px;
            padding: 3px 8px;
            border-radius: var(--radius);
            display: inline-block;
            min-width: 60px;
            text-align: center;
        }

        .get {
            color: white;
            background-color: var(--success-color);
        }

        .post {
            color: white;
            background-color: var(--primary-color);
        }

        .put {
            color: white;
            background-color: var(--warning-color);
        }

        .delete {
            color: white;
            background-color: var(--danger-color);
        }

        /* Request and Response examples */
        .request-example, .response-example {
            margin-top: 15px;
        }

        .last-updated {
            font-style: italic;
            color: #7f8c8d;
            text-align: right;
            margin-top: 5px;
        }

        /* Notification boxes */
        .warning, .note, .tip {
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: var(--radius);
        }

        .warning {
            background-color: #fffaed;
            border-left: 4px solid var(--warning-color);
        }

        .note {
            background-color: #e8f4f8;
            border-left: 4px solid var(--primary-color);
        }

        .tip {
            background-color: #edfaf1;
            border-left: 4px solid var(--success-color);
        }

        /* Sidebar navigation */
        #api-sidebar {
            padding: 20px;
            background-color: var(--light-bg);
            border-radius: var(--radius);
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            position: sticky;
            top: 20px;
            transition: var(--transition);
        }

        #api-sidebar.sticky {
            top: 0;
        }

        #api-sidebar ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        #api-sidebar li {
            margin: 5px 0;
        }

        #api-sidebar .nav-section {
            font-weight: bold;
            color: var(--secondary-color);
            display: block;
            padding: 5px 0;
        }

        #api-sidebar .nav-subsection {
            padding-left: 15px;
            display: block;
            color: var(--text-color);
        }

        /* Toggle button for collapsible sections */
        .toggle-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            width: 24px;
            height: 24px;
            line-height: 1;
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
        }

        /* Copy button for code blocks */
        .copy-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }

        .copy-btn:hover {
            opacity: 1;
        }

        /* Search functionality */
        #search-container {
            margin-bottom: 20px;
        }

        #api-search {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 16px;
        }

        /* Hidden state for collapsible content */
        .hidden {
            display: none;
        }

        /* "Try It" functionality */
        .try-api-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 5px 10px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }

        .try-api-btn:hover {
            background-color: #2980b9;
        }

        .try-it-form {
            background-color: var(--light-bg);
            padding: 15px;
            margin: 15px 0;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
        }

        .try-it-form label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        .try-it-form input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
        }

        .execute-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 8px 15px;
            margin-top: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .execute-btn:hover {
            background-color: #219653;
        }

        .result-container {
            background-color: var(--code-bg);
            padding: 15px;
            margin-top: 15px;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            display: none;
        }

        /* Dark mode styles */
        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-light);
        }

        .dark-mode h1, .dark-mode h2, .dark-mode h4 {
            color: var(--text-light);
        }

        .dark-mode h3 {
            color: #5dade2;
        }

        .dark-mode a {
            color: #5dade2;
        }

        .dark-mode code {
            background-color: #34495e;
            color: #ecf0f1;
        }

        .dark-mode pre {
            background-color: #34495e;
            border-left-color: #5dade2;
        }

        .dark-mode table, .dark-mode th, .dark-mode td {
            border-color: #4a5568;
        }

        .dark-mode th {
            background-color: #2c3e50;
        }

        .dark-mode tr:nth-child(even) {
            background-color: #34495e;
        }

        .dark-mode .endpoint {
            background-color: #34495e;
        }

        .dark-mode #api-sidebar {
            background-color: #34495e;
        }

        .dark-mode #api-sidebar .nav-section, .dark-mode #api-sidebar .nav-subsection {
            color: var(--text-light);
        }

        .dark-mode #api-search {
            background-color: #34495e;
            color: var(--text-light);
            border-color: #4a5568;
        }

        .dark-mode .try-it-form {
            background-color: #34495e;
            border-color: #4a5568;
        }

        .dark-mode .try-it-form input {
            background-color: #2c3e50;
            color: var(--text-light);
            border-color: #4a5568;
        }

        .dark-mode .result-container {
            background-color: #2c3e50;
            border-color: #4a5568;
        }

        /* Dark mode toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .theme-toggle label {
            margin-right: 10px;
            color: white;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            #api-sidebar {
                position: static;
                max-height: none;
            }
            
            .endpoint {
                padding: 10px;
            }
            
            .method {
                display: block;
                margin-bottom: 5px;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .theme-toggle {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1 style="color: white; border-bottom: none; margin: 0;">API Documentation</h1>
            <div class="theme-toggle">
                <label for="dark-mode-toggle">Dark Mode</label>
                <label class="switch">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </header>

    <div class="container">
        <aside id="api-sidebar">
            <div id="search-container">
                <input type="text" id="api-search" placeholder="Search API...">
            </div>
            <!-- Navigation will be dynamically generated by JavaScript -->
        </aside>

        <div class="main-content">
            <p class="last-updated">Last Updated: March 12, 2025</p>

            <h2 id="overview">Overview</h2>
            <p>This document provides a comprehensive guide for interacting with our API services. The API provides access to various resources including assessments, companies, exports, incidents, mines, reporting, and user management.</p>

            <h2 id="authentication">Authentication</h2>
            <p>All authenticated endpoints require the following headers:</p>
            <table>
                <thead>
                    <tr>
                        <th>Header</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>authorization</code></td>
                        <td>The 'Bearer' access token received at login</td>
                    </tr>
                    <tr>
                        <td><code>x-refresh</code></td>
                        <td>The refresh token received at login to refresh access token if expired</td>
                    </tr>
                    <tr>
                        <td><code>x-platform</code></td>
                        <td>The dashboard to access. Should either be 'gold' or '3ts'. Default value: '3ts'</td>
                    </tr>
                </tbody>
            </table>

            <h3 id="authentication-flow">Authentication Flow</h3>
            <ol>
                <li>Call the <code>/login</code> endpoint with valid credentials</li>
                <li>Receive access token and refresh token in the response</li>
                <li>Include these tokens in the headers of subsequent API requests</li>
                <li>If you receive a 401 error, your access token may have expired. The API will automatically use your refresh token to generate a new access token if properly configured.</li>
            </ol>

            <h3 id="authentication-response">Authentication Response Example</h3>
            <pre><code>{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", // Access token
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", // Refresh token
    "user": {
      "id": "u12345",
      "name": "John",
      "surname": "Doe",
      "email": "user@example.com",
      "role": "admin"
    }
  }
}</code></pre>

            <h2 id="api-endpoints">API Endpoints</h2>

            <h3 id="assessments">Assessments</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /asssessments</h4>
                <p><strong>Description</strong>: Retrieve all assessments.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter assessments by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /asssessments/mine/{id}</h4>
                <p><strong>Description</strong>: Retrieve details for a specific assessment.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the assessment.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /assessmentsnoauth/mine/</h4>
                <p><strong>Description</strong>: Get assessment details for a fixed ID (ce62eb6o) for QR code.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /assessments/mines/{id}</h4>
                <p><strong>Description</strong>: Get assessment details for a specific mine ID for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <h3 id="companies">Companies</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /companies</h4>
                <p><strong>Description</strong>: Retrieve all companies for the requesting dashboard.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter companies by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /companies/all</h4>
                <p><strong>Description</strong>: Retrieve all companies from both gold and 3ts platforms.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /companies/{id}</h4>
                <p><strong>Description</strong>: Retrieve details for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /owners/{id}</h4>
                <p><strong>Description</strong>: Get beneficial owners details for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /shareholders/{id}</h4>
                <p><strong>Description</strong>: Get shareholders details for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /documents/{id}</h4>
                <p><strong>Description</strong>: Get documents for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /companiesnoAuth/{id}</h4>
                <p><strong>Description</strong>: Get specific company details for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /ownersnoAuth/{id}</h4>
                <p><strong>Description</strong>: Get beneficial owners details for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /shareholdersnoAuth/{id}</h4>
                <p><strong>Description</strong>: Get shareholders details for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /documentsnoAuth/{id}</h4>
                <p><strong>Description</strong>: Get documents for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /companiesMine</h4>
                <p><strong>Description</strong>: Get details for a specific mine-related company with fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /ownersMine</h4>
                <p><strong>Description</strong>: Get beneficial owners for a specific mine-related company with fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /shareholdersMine</h4>
                <p><strong>Description</strong>: Get shareholders for a specific mine-related company with fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /documentsMine</h4>
                <p><strong>Description</strong>: Get documents for a specific mine-related company with fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <h3 id="exports">Exports</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /exports</h4>
                <p><strong>Description</strong>: Get all exports for the authenticated user.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter exports by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /exportsnoauth</h4>
                <p><strong>Description</strong>: Get all exports for QR code.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /exports/{id}</h4>
                <p><strong>Description</strong>: Get specific export details for the authenticated user.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the export.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /exportnoauth/{id}</h4>
                <p><strong>Description</strong>: Get specific export details for QR code.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the export.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /timeTracking</h4>
                <p><strong>Description</strong>: Get time tracking information for a specific export.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the export.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method put">PUT</span> /timeTracking/update</h4>
                <p><strong>Description</strong>: Update time tracking information for a specific export.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the export.</li>
                    <li>Additional fields to update in the time tracking record.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /progressbar</h4>
                <p><strong>Description</strong>: Get progress information for a specific export.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the export.</li>
                </ul>
            </div>

            <h3 id="incidents">Incidents</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /incidents</h4>
                <p><strong>Description</strong>: Get all incidents.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter incidents by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /incidents/{id}</h4>
                <p><strong>Description</strong>: Get specific incident details.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the incident.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /incidents/company/{id}</h4>
                <p><strong>Description</strong>: Get all incidents for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /incidents/mine/{id}</h4>
                <p><strong>Description</strong>: Get all incidents for a specific mine.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /incidentsnoauth/mine/</h4>
                <p><strong>Description</strong>: Get incidents for a specific mine for QR code using a fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <h3 id="integrations">Integrations</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /metals-api</h4>
                <p><strong>Description</strong>: Get TIN rates from MetalsAPI.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /metals-api/yearly</h4>
                <p><strong>Description</strong>: Get yearly metals data.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method post">POST</span> /openai-chat</h4>
                <p><strong>Description</strong>: Interact with OpenAI(deepseek) chat service.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li>Message content to send to OpenAI(deepseek).</li>
                </ul>
            </div>

            <h3 id="mines">Mines</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /mines</h4>
                <p><strong>Description</strong>: Get all mines.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /miners/{mine}</h4>
                <p><strong>Description</strong>: Get all miners for a specific mine.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>mine</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /mines/{id}</h4>
                <p><strong>Description</strong>: Get specific mine details.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /mines/images/{id}</h4>
                <p><strong>Description</strong>: Get images for a specific mine.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /mines/videos/{id}</h4>
                <p><strong>Description</strong>: Get videos for a specific mine.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the mine.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method post">POST</span> /image</h4>
                <p><strong>Description</strong>: Get a specific image file.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>file</code> (required): File path of the image to retrieve.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /mines/company/{id}</h4>
                <p><strong>Description</strong>: Get mines for a specific company.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the company.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /minesnoauth</h4>
                <p><strong>Description</strong>: Get mine details for QR code using a fixed ID.</p>
                <p><strong>Notes</strong>: This endpoint uses a hardcoded ID 'ce62eb6o' and platform '3ts'.</p>
            </div>

            <h3 id="overview-reports">Overview Reports</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /overview/assessments</h4>
                <p><strong>Description</strong>: Get assessments counts for the past 6 months for overview reporting.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter overview by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /overview/incidents</h4>
                <p><strong>Description</strong>: Get incidents counts for the past 6 months for overview reporting.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter overview by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /overview/exports</h4>
                <p><strong>Description</strong>: Get exports counts for the past 6 months for overview reporting.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter overview by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /overview/risks</h4>
                <p><strong>Description</strong>: Get incidents risks counts for overview reporting.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter overview by country.</li>
                </ul>
            </div>

            <h3 id="purchases">Purchases</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /purchases</h4>
                <p><strong>Description</strong>: Get all purchases for the requesting user.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/daily</h4>
                <p><strong>Description</strong>: Get daily purchase report.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/mtd</h4>
                <p><strong>Description</strong>: Get month-to-date balance report.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/deliveries</h4>
                <p><strong>Description</strong>: Get purchase deliveries report.</p>
            </div>

            <h3 id="reporting">Reporting</h3>
            
            <div class="endpoint">
                <h4><span class="method get">GET</span> /logs</h4>
                <p><strong>Description</strong>: Get all system logs. Requires user to be admin.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /admin/{selection}</h4>
                <p><strong>Description</strong>: Get specific admin overview report.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>selection</code> (required): The database to report on. Values can be 'production', 'blending' or 'processing' for 3Ts and 'production' or 'purchase' for Gold.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /sessions</h4>
                <p><strong>Description</strong>: Get all user sessions. Requires user to be admin.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /purchases</h4>
                <p><strong>Description</strong>: Get all purchases.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/daily</h4>
                <p><strong>Description</strong>: Get daily report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/mtd</h4>
                <p><strong>Description</strong>: Get month-to-date balance report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/deliveries</h4>
                <p><strong>Description</strong>: Get purchase deliveries report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/trace/{id}</h4>
                <p><strong>Description</strong>: Get trace report for a specific company or entity.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the entity to trace.</li>
                </ul>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/sales/{mineral}</h4>
                <p><strong>Description</strong>: Get sales report for a specific mineral.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>mineral</code> (required): The mineral type to report on.</li>
                </ul>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/salesrange/{mineral}</h4>
                <p><strong>Description</strong>: Get sales report for a specific mineral within a date range.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>mineral</code> (required): The mineral type to report on.</li>
                </ul>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                    <li><code>start_date</code> (required): Start date for the report range (MM/DD/YYYY).</li>
                    <li><code>end_date</code> (required): End date for the report range (MM/DD/YYYY).</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/Monthly</h4>
                <p><strong>Description</strong>: Get monthly report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/purchaseMonthly</h4>
                <p><strong>Description</strong>: Get monthly purchase report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/salestrend</h4>
                <p><strong>Description</strong>: Get sales trend report.</p>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/trendgraph/{id}</h4>
                <p><strong>Description</strong>: Get trend graph for a specific entity.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the entity.</li>
                </ul>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /report/trendgraphbyyear/{id}</h4>
                <p><strong>Description</strong>: Get yearly trend graph for a specific entity.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the entity.</li>
                </ul>
                <p><strong>Query Parameters</strong>:</p>
                <ul>
                    <li><code>country</code> (optional): Filter report by country.</li>
                    <li><code>year</code> (required): Year for the trend graph.</li>
                </ul>
            </div>

            <h3 id="user-management">User Management</h3>
            
            <div class="endpoint">
                <h4><span class="method post">POST</span> /login</h4>
                <p><strong>Description</strong>: Authenticate user and create valid session credentials.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>email</code> (required): Valid email address.</li>
                    <li><code>password</code> (required): User password.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method post">POST</span> /users</h4>
                <p><strong>Description</strong>: Create a dashboard user account. Requires admin privileges.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>name</code> (required): User's first name.</li>
                    <li><code>surname</code> (required): User's last name.</li>
                    <li><code>email</code> (required): Valid email address.</li>
                    <li><code>password</code> (required): Password at least 8 characters long.</li>
                    <li><code>company</code> (required): User's company.</li>
                    <li><code>type</code> (required): User type.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method delete">DELETE</span> /users/{uid}</h4>
                <p><strong>Description</strong>: Delete a user account. Requires admin privileges.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>uid</code> (required): Unique identifier for the user.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method put">PUT</span> /users/{uid}</h4>
                <p><strong>Description</strong>: Update a user account. Requires admin privileges.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>uid</code> (required): Unique identifier for the user.</li>
                </ul>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>name</code> (required): User's first name.</li>
                    <li><code>surname</code> (required): User's last name.</li>
                    <li><code>email</code> (required): Valid email address.</li>
                    <li><code>access</code> (required): User access level.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method put">PUT</span> /users/status/{uid}</h4>
                <p><strong>Description</strong>: Update a user's status (activate/deactivate). Requires admin privileges.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>uid</code> (required): Unique identifier for the user.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method post">POST</span> /forgot</h4>
                <p><strong>Description</strong>: Request a password reset.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>email</code> (required): Email address for the account.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method post">POST</span> /password</h4>
                <p><strong>Description</strong>: Change user password.</p>
                <p><strong>Request Body</strong>:</p>
                <ul>
                    <li><code>email</code> (required): Email address for the account.</li>
                    <li><code>password</code> (required): New password.</li>
                    <li><code>cpassword</code> (required): Confirm new password.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method delete">DELETE</span> /sessions/{id}</h4>
                <p><strong>Description</strong>: Terminate a specific session. Requires admin privileges.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>id</code> (required): Unique identifier for the session.</li>
                </ul>
            </div>

            <div class="endpoint">
                <h4><span class="method delete">DELETE</span> /sessions</h4>
                <p><strong>Description</strong>: Terminate all sessions. Requires admin privileges.</p>
            </div>

            <div class="endpoint">
                <h4><span class="method get">GET</span> /users/{platform}</h4>
                <p><strong>Description</strong>: Get all users for a specific platform.</p>
                <p><strong>URL Parameters</strong>:</p>
                <ul>
                    <li><code>platform</code> (required): The platform to get users for ('gold' or '3ts').</li>
                </ul>
            </div>

            <h2 id="response-codes">Response Codes</h2>
            <table>
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>200</td>
                        <td>Success</td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>Bad Request</td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>Unauthorized</td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>Forbidden</td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>Not Found</td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>Server Error</td>
                    </tr>
                </tbody>
            </table>

            <h2 id="error-handling">Error Handling</h2>
            <p>All API errors are returned in a consistent JSON format:</p>

            <pre><code>{
  "success": false,
  "error": "Error message description"
}</code></pre>

            <h2 id="example-requests">Example Requests and Responses</h2>

            <h3 id="auth-example">Authentication Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X POST https://api.example.com/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "yourpassword"
  }'</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "u12345",
      "name": "John",
      "surname": "Doe",
      "email": "user@example.com",
      "role": "admin"
    }
  }
}</code></pre>
            </div>

            <h3 id="companies-example">Get All Companies Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/companies \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": [
    {
      "id": "comp123",
      "name": "Mining Corporation Ltd.",
      "country": "Rwanda",
      "status": "active",
      "created": "2024-12-10T14:35:22Z"
    },
    {
      "id": "comp124",
      "name": "Mineral Exports Inc.",
      "country": "DRC",
      "status": "pending",
      "created": "2025-01-15T09:12:45Z"
    }
  ]
}</code></pre>
            </div>

            <h3 id="company-detail-example">Get Specific Company Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/companies/comp123 \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "id": "comp123",
    "name": "Mining Corporation Ltd.",
    "country": "Rwanda",
    "status": "active",
    "created": "2024-12-10T14:35:22Z",
    "address": "123 Mining Road, Kigali",
    "contact": "+250123456789",
    "email": "info@miningcorp.com",
    "registration": "RC12345",
    "employees": 124,
    "operations": [
      "extraction",
      "processing"
    ]
  }
}</code></pre>
            </div>

            <h3 id="mines-example">Get All Mines Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/mines \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": [
    {
      "id": "mine789",
      "name": "East Ridge Mine",
      "mineral": "tin",
      "location": {
        "country": "Rwanda",
        "province": "Eastern",
        "coordinates": {
          "latitude": -1.9441,
          "longitude": 30.0619
        }
      },
      "companyId": "comp123",
      "status": "active"
    },
    {
      "id": "mine790",
      "name": "Western Pit",
      "mineral": "tungsten",
      "location": {
        "country": "DRC",
        "province": "North Kivu",
        "coordinates": {
          "latitude": -1.6702,
          "longitude": 29.2385
        }
      },
      "companyId": "comp124",
      "status": "active"
    }
  ]
}</code></pre>
            </div>

            <h3 id="create-user-example">Create User Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X POST https://api.example.com/users \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts" \
  -d '{
    "name": "Jane",
    "surname": "Smith",
    "email": "jane.smith@example.com",
    "password": "Password123!",
    "company": "Regulatory Authority",
    "type": "regulator"
  }'</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "id": "u12346",
    "name": "Jane",
    "surname": "Smith",
    "email": "jane.smith@example.com",
    "company": "Regulatory Authority",
    "type": "regulator",
    "created": "2025-03-17T09:45:22Z"
  },
  "message": "User created successfully"
}</code></pre>
            </div>

            <h3 id="assessment-example">Get Assessment Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/asssessments/mine/assess123 \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "id": "assess123",
    "mineId": "mine789",
    "date": "2025-02-15T10:30:00Z",
    "assessor": "Jane Smith",
    "status": "completed",
    "score": 85,
    "findings": [
      {
        "category": "safety",
        "compliance": true,
        "notes": "Safety equipment properly maintained and used"
      },
      {
        "category": "environmental",
        "compliance": true,
        "notes": "Water management systems in place and functioning"
      },
      {
        "category": "labor",
        "compliance": false,
        "notes": "Some workers missing proper identification documentation"
      }
    ],
    "recommendations": [
      "Improve worker documentation process",
      "Enhance dust control measures"
    ]
  }
}</code></pre>
            </div>

            <h3 id="export-example">Report Export Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/exports/exp456 \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "id": "exp456",
    "date": "2025-01-25T08:15:00Z",
    "companyId": "comp123",
    "mineral": "tin",
    "weight": 5250,
    "weightUnit": "kg",
    "purity": 98.5,
    "value": 157500,
    "currency": "USD",
    "destination": "Belgium",
    "transportMethod": "air",
    "certificates": [
      {
        "type": "iTSCi",
        "number": "RW-12345-TIN",
        "validUntil": "2025-12-31"
      }
    ],
    "status": "completed",
    "mineSources": [
      {
        "mineId": "mine789",
        "percentage": 100
      }
    ]
  }
}</code></pre>
            </div>

            <h3 id="incidents-example">Get Incidents Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code>curl -X GET https://api.example.com/incidents/inc789 \
  -H "Authorization: Bearer your_access_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform": "3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": true,
  "data": {
    "id": "inc789",
    "date": "2025-02-18T14:22:00Z",
    "location": {
      "mineId": "mine789",
      "coordinates": {
        "latitude": -1.9441,
        "longitude": 30.0619
      }
    },
    "category": "safety",
    "severity": "medium",
    "description": "Minor landslide occurred in section B3 of the mine. No injuries reported.",
    "reporter": {
      "id": "u12345",
      "name": "John Doe"
    },
    "status": "resolved",
    "resolution": {
      "actions": "Area cordoned off and geological survey conducted. Additional structural supports installed.",
      "date": "2025-02-20T10:15:00Z",
      "verifiedBy": {
        "id": "u12346",
        "name": "Jane Smith"
      }
    }
  }
}</code></pre>
            </div>

            <h3 id="error-example">Error Response Example</h3>
            <div class="request-example">
                <h4>Request:</h4>
                <pre><code># Invalid authentication
curl -X GET https://api.example.com/companies \
  -H "Authorization: Bearer invalid_token_here" \
  -H "x-refresh: your_refresh_token_here" \
  -H "x-platform: 3ts"</code></pre>
            </div>

            <div class="response-example">
                <h4>Response:</h4>
                <pre><code>{
  "success": false,
  "error": "Unauthorized access. Authentication token is invalid or expired.",
  "code": 401
}</code></pre>
            </div>

            
            <h2 id="support">Support</h2>
            <p>For API support or to report issues, please contact our developer support team </p>
        </div>
    </div>

    <script>
        // JavaScript to enhance the API documentation functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add collapsible functionality to sections
            const sections = document.querySelectorAll('h3');
            
            sections.forEach(section => {
                // Create toggle button
                const toggleBtn = document.createElement('button');
                toggleBtn.innerHTML = '';
                toggleBtn.className = 'toggle-btn';
                toggleBtn.setAttribute('aria-label', 'Toggle section');
                
                // Insert button before section title
                section.prepend(toggleBtn);
                
                // Find all elements until the next h3 or h2
                let content = [];
                let nextElem = section.nextElementSibling;
                
                while (nextElem && 
                       nextElem.tagName !== 'H3' && 
                       nextElem.tagName !== 'H2') {
                    content.push(nextElem);
                    nextElem = nextElem.nextElementSibling;
                }
                
                // Add click event
                toggleBtn.addEventListener('click', () => {
                    content.forEach(elem => {
                        elem.classList.toggle('hidden');
                    });
                    
                    toggleBtn.innerHTML = toggleBtn.innerHTML === '' ? '+' : '';
                });
            });
            
            // Add search functionality
            const searchInput = document.getElementById('api-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const endpoints = document.querySelectorAll('.endpoint');
                    
                    endpoints.forEach(endpoint => {
                        const title = endpoint.querySelector('h4').textContent.toLowerCase();
                        const description = endpoint.querySelector('p').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || description.includes(searchTerm)) {
                            endpoint.style.display = '';
                            // Ensure parent section is visible
                            let parent = endpoint.parentElement;
                            while (parent && !parent.matches('h3') && parent !== document.body) {
                                parent = parent.parentElement;
                            }
                            if (parent && parent.matches('h3')) {
                                const toggleBtn = parent.querySelector('.toggle-btn');
                                if (toggleBtn.innerHTML === '+') {
                                    toggleBtn.click(); // Expand section
                                }
                            }
                        } else {
                            endpoint.style.display = 'none';
                        }
                    });
                });
            }
            
            // Add copy-to-clipboard functionality for code blocks
            const codeBlocks = document.querySelectorAll('pre code');
            
            codeBlocks.forEach(block => {
                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-btn';
                copyBtn.innerHTML = 'Copy';
                copyBtn.setAttribute('aria-label', 'Copy to clipboard');
                
                const pre = block.parentElement;
                pre.style.position = 'relative';
                pre.appendChild(copyBtn);
                
                copyBtn.addEventListener('click', () => {
                    const textToCopy = block.textContent;
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        copyBtn.innerHTML = 'Copied!';
                        setTimeout(() => {
                            copyBtn.innerHTML = 'Copy';
                        }, 2000);
                    }).catch(err => {
                        console.error('Could not copy text: ', err);
                        copyBtn.innerHTML = 'Error!';
                        setTimeout(() => {
                            copyBtn.innerHTML = 'Copy';
                        }, 2000);
                    });
                });
            });
            
            // Add navigation sidebar with smooth scrolling
            const sidebar = document.getElementById('api-sidebar');
            if (sidebar) {
                const headings = document.querySelectorAll('h2, h3');
                const navList = document.createElement('ul');
                
                headings.forEach(heading => {
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    
                    // Create an ID if heading doesn't have one
                    if (!heading.id) {
                        heading.id = heading.textContent.toLowerCase().replace(/[^\w]+/g, '-');
                    }
                    
                    link.href = `#${heading.id}`;
                    link.textContent = heading.textContent;
                    link.className = heading.tagName === 'H2' ? 'nav-section' : 'nav-subsection';
                    
                    // Add smooth scrolling
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        document.querySelector(this.getAttribute('href')).scrollIntoView({
                            behavior: 'smooth'
                        });
                    });
                    
                    listItem.appendChild(link);
                    navList.appendChild(listItem);
                });
                
                sidebar.appendChild(navList);
                
                // Add sticky behavior to sidebar
                const header = document.querySelector('header');
                const headerHeight = header ? header.offsetHeight : 0;
                
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > headerHeight) {
                        sidebar.classList.add('sticky');
                    } else {
                        sidebar.classList.remove('sticky');
                    }
                });
            }
            
            // Add "Try it" functionality to endpoints
            const endpoints = document.querySelectorAll('.endpoint');
            
            endpoints.forEach(endpoint => {
                const tryBtn = document.createElement('button');
                tryBtn.textContent = 'Try it';
                tryBtn.className = 'try-api-btn';
                
                // Insert button after endpoint heading
                const heading = endpoint.querySelector('h4');
                heading.appendChild(tryBtn);
                
                tryBtn.addEventListener('click', function() {
                    // Check if form already exists
                    const existingForm = endpoint.querySelector('.try-it-form');
                    if (existingForm) {
                        existingForm.remove();
                        return;
                    }
                    
                    const method = heading.querySelector('.method').textContent.trim();
                    const path = heading.textContent.split(' ')[1];
                    
                    // Create form elements for inputs
                    const tryItForm = document.createElement('div');
                    tryItForm.className = 'try-it-form';
                    
                    // Add auth token field
                    const tokenLabel = document.createElement('label');
                    tokenLabel.textContent = 'Bearer Token:';
                    tokenLabel.htmlFor = 'auth-token';
                    
                    const tokenInput = document.createElement('input');
                    tokenInput.type = 'text';
                    tokenInput.id = 'auth-token';
                    tokenInput.placeholder = 'Enter your access token';
                    
                    // Add URL params if any
                    const urlParamsList = endpoint.querySelector('ul:nth-of-type(1)');
                    let urlParams = [];
                    
                    if (urlParamsList && urlParamsList.previousElementSibling.textContent.includes('URL Parameters')) {
                        urlParams = Array.from(urlParamsList.querySelectorAll('li')).map(li => {
                            const paramText = li.textContent;
                            const paramMatch = paramText.match(/`([^`]+)`/);
                            return paramMatch ? paramMatch[1] : null;
                        }).filter(Boolean);
                        
                        if (urlParams.length > 0) {
                            const urlParamsTitle = document.createElement('h5');
                            urlParamsTitle.textContent = 'URL Parameters:';
                            tryItForm.appendChild(urlParamsTitle);
                            
                            urlParams.forEach(param => {
                                const label = document.createElement('label');
                                label.textContent = param + ':';
                                label.htmlFor = 'param-' + param;
                                
                                const input = document.createElement('input');
                                input.type = 'text';
                                input.id = 'param-' + param;
                                input.dataset.param = param;
                                input.className = 'url-param';
                                
                                tryItForm.appendChild(label);
                                tryItForm.appendChild(input);
                            });
                        }
                    }
                    
                    // Add request body if POST or PUT
                    if (method === 'POST' || method === 'PUT') {
                        const bodyParamsList = endpoint.querySelectorAll('ul')[1];
                        if (bodyParamsList && bodyParamsList.previousElementSibling.textContent.includes('Request Body')) {
                            const bodyTitle = document.createElement('h5');
                            bodyTitle.textContent = 'Request Body:';
                            
                            const bodyInput = document.createElement('textarea');
                            bodyInput.id = 'request-body';
                            bodyInput.rows = 8;
                            bodyInput.placeholder = '{\n  // Enter JSON request body\n}';
                            
                            tryItForm.appendChild(bodyTitle);
                            tryItForm.appendChild(bodyInput);
                        }
                    }
                    
                    // Add execute button
                    const executeBtn = document.createElement('button');
                    executeBtn.textContent = 'Execute Request';
                    executeBtn.className = 'execute-btn';
                    
                    // Add result container
                    const resultContainer = document.createElement('div');
                    resultContainer.className = 'result-container';
                    resultContainer.innerHTML = '<h5>Response:</h5><pre><code></code></pre>';
                    
                    tryItForm.appendChild(tokenLabel);
                    tryItForm.appendChild(tokenInput);
                    tryItForm.appendChild(document.createElement('br'));
                    tryItForm.appendChild(executeBtn);
                    tryItForm.appendChild(resultContainer);
                    
                    // Insert form after endpoint description
                    endpoint.appendChild(tryItForm);
                    
                    // Set up the execute button
                    executeBtn.addEventListener('click', () => {
                        // This is just a placeholder - in a real implementation, 
                        // you would make the actual API call
                        resultContainer.querySelector('code').textContent = 
                            'This is a simulated response.\n\n' +
                            'In a production environment, this would make a real API call to:\n' +
                            `${method} ${path}\n\n` +
                            'With the authorization token you provided.';
                        
                        resultContainer.style.display = 'block';
                    });
                });
            });
            
            // Dark mode toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            if (darkModeToggle) {
                // Check user preference
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.body.classList.add('dark-mode');
                    darkModeToggle.checked = true;
                }
                
                // Listen for toggle changes
                darkModeToggle.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode', this.checked);
                    // Save preference
                    localStorage.setItem('darkMode', this.checked);
                });
                
                // Check localStorage on page load
                if (localStorage.getItem('darkMode') === 'true') {
                    document.body.classList.add('dark-mode');
                    darkModeToggle.checked = true;
                }
            }
        });
    </script>
</body>
</html>